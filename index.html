<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality Space Adventures</title>
<style>
    body { margin:0; overflow:hidden; background:#222; font-family:sans-serif; }
    canvas { display:block; }
    .button { 
        position: fixed; 
        font-size: 48px; 
        background:#ffcc00; 
        color:#000; 
        padding: 12px 20px; 
        border-radius:8px; 
        user-select:none; 
        z-index:1000;
    }
    #left { left:20px; bottom:20px; }
    #right { left:120px; bottom:20px; }
    #jump { right:20px; bottom:20px; }
</style>
</head>
<body>

<div id="left" class="button">‚óÄ</div>
<div id="right" class="button">‚ñ∂</div>
<div id="jump" class="button">‚¨Ü</div>

<canvas id="gameCanvas" width="800" height="600"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const WIDTH = canvas.width;
const HEIGHT = canvas.height;
const ROAD_Y = HEIGHT - 80;

let player = { x:WIDTH-100, y:ROAD_Y-64, w:64, h:64, vy:0, jumping:false };
let mochkil = { x:WIDTH-150, y:ROAD_Y-64, w:64, h:64 };
let foods = [];

let leftDown=false, rightDown=false, jumpDown=false;
let scrollX=0;

// ---- Buttons ----
document.getElementById('left').addEventListener('touchstart', ()=>leftDown=true);
document.getElementById('left').addEventListener('touchend', ()=>leftDown=false);
document.getElementById('right').addEventListener('touchstart', ()=>rightDown=true);
document.getElementById('right').addEventListener('touchend', ()=>rightDown=false);
document.getElementById('jump').addEventListener('touchstart', ()=>jumpDown=true);
document.getElementById('jump').addEventListener('touchend', ()=>jumpDown=false);

// ---- Game loop ----
function gameLoop(){
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

// ---- Update positions ----
function update(){
    // Move player
    if(leftDown) player.x -=5;
    if(rightDown) player.x +=5;
    if(jumpDown && !player.jumping){ player.vy=-12; player.jumping=true; }

    // Gravity
    player.vy += 0.6;
    player.y += player.vy;
    if(player.y > ROAD_Y-64){ player.y = ROAD_Y-64; player.vy=0; player.jumping=false; }

    // Mochkil follows player
    let dx = player.x - mochkil.x;
    mochkil.x += dx * 0.05;
    mochkil.y = ROAD_Y-64;

    // Scroll world so player stays ~150px from right
    scrollX = player.x - (WIDTH-150);

    // Spawn food
    if(Math.random()<0.02){
        let fx = player.x - WIDTH - Math.random()*400;
        foods.push({ x:fx, y:ROAD_Y-64, emoji:Math.random()<0.5?'üçï':'üåÆ', collected:false });
    }

    // Mochkil collects food
    foods.forEach(f=>{
        if(!f.collected && Math.abs(f.x - mochkil.x)<40){
            f.collected=true;
        }
    });

    // Remove old food
    foods = foods.filter(f=>f.x < player.x + WIDTH);
}

// ---- Draw everything ----
function draw(){
    ctx.clearRect(0,0,WIDTH,HEIGHT);

    // Ground
    ctx.fillStyle="#666";
    ctx.fillRect(0,ROAD_Y, WIDTH, 80);

    // Foods
    foods.forEach(f=>{
        if(!f.collected){
            ctx.font="48px sans-serif";
            ctx.fillText(f.emoji, f.x - scrollX, f.y);
        }
    });

    // Player
    ctx.font="64px sans-serif";
    ctx.fillText("üèÉ‚Äç‚ôÄÔ∏è", player.x - scrollX, player.y);

    // Mochkil as raccoon
    ctx.fillText("ü¶ù", mochkil.x - scrollX, mochkil.y);
}

gameLoop();
</script>

</body>
</html>
