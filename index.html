<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality ‚Äì Night Run</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#020a2a;
  touch-action:none;
  font-family:sans-serif;
}
#game{
  display:block;
}
#controls{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:12px;
  z-index:10;
}
button{
  font-size:26px;
  padding:12px 18px;
  border-radius:12px;
  border:none;
  background:#222;
  color:#fff;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<div id="controls">
  <button id="left">‚¨ÖÔ∏è</button>
  <button id="jump">‚¨ÜÔ∏è</button>
  <button id="right">‚û°Ô∏è</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* LOAD PLAYER IMAGES */
const runnerRight = new Image();
runnerRight.src = "IMG_2161.png";
const runnerLeft = new Image();
runnerLeft.src = "IMG_2162.png";

/* WORLD LAYOUT */
const roadH = 80;
const grassH = 120;

/* PLAYER */
const player = {
  x: canvas.width/2,
  y: 0,
  vy:0,
  jumping:false,
  dir:"right"
};

/* SCROLL */
let scrollX = 0;

/* INPUT */
let left=false, right=false, jump=false;
function bind(btn, down, up){
  btn.addEventListener("touchstart", e=>{e.preventDefault(); down();});
  btn.addEventListener("touchend", e=>{e.preventDefault(); up();});
}
bind(document.getElementById("left"), ()=>left=true, ()=>left=false);
bind(document.getElementById("right"), ()=>right=true, ()=>right=false);
bind(document.getElementById("jump"), ()=>jump=true, ()=>jump=false);

/* BACKGROUND DECOR */
const cityBuildings = [];
for(let i=0;i<20;i++){
  cityBuildings.push({x:i*130, emoji:["üè¢","üè¨","üè≠","üè®","üè¶","üè•","üè†","üè°","üïå","‚õ™Ô∏è","üèüÔ∏è"][i%11]});
}

const forestTrees = [];
for(let i=0;i<15;i++){
  forestTrees.push({x:2500+i*120, emoji: i%2===0 ? "üå≤":"üå≥"});
}

const stars = [];
for(let i=0;i<120;i++){
  stars.push({x:Math.random()*5000, y:Math.random()*200, emoji:["‚≠êÔ∏è","‚ú®","üåü"][i%3]});
}

const clouds = [
  {x:400,y:120},{x:900,y:160},{x:1400,y:100}
];

/* FARM ELEMENTS */
const farmObjects = [
  {x:3200, y:0, emoji:"üè†", width:150, height:150},
  {x:3300, y:0, emoji:"üöú", width:60, height:60},
  {x:3250, y:0, emoji:"üêÑ", width:60, height:60}, // abducted cow
  {x:3220, y:0, emoji:"üêë", width:40, height:40},
  {x:3260, y:0, emoji:"üêñ", width:50, height:50},
  {x:3270, y:0, emoji:"üêì", width:30, height:30},
  {x:3280, y:0, emoji:"üêà", width:25, height:25},
  {x:3240, y:0, emoji:"üåæ", width:15, height:15},
  {x:3245, y:0, emoji:"üåæ", width:15, height:15}
];

/* UFO */
const ufo = {x:3250, y:-100, size:80, active:false, scale:0.5};

/* LOOP */
function update(){
  if(left){
    scrollX -= 5;
    player.dir="left";
  }
  if(right){
    scrollX += 5;
    player.dir="right";
  }

  if(jump && !player.jumping){
    player.vy = -18;
    player.jumping = true;
  }

  player.vy += 1;
  player.y += player.vy;

  const groundY = canvas.height - roadH - 18;
  if(player.y > groundY){
    player.y = groundY;
    player.vy = 0;
    player.jumping = false;
  }

  // UFO abduction logic
  const cow = farmObjects.find(o=>o.emoji==="üêÑ");
  if(!ufo.active && player.x+scrollX > 3000){
    ufo.active = true;
    ufo.y = -100;
    ufo.scale=0.5;
  }
  if(ufo.active){
    if(ufo.y < cow.y - 60){
      ufo.y += 4; 
      ufo.scale +=0.01;
    } else if(cow.y > ufo.y+10){
      cow.y -=4;
    } else {
      // disappear cow and ufo
      cow.y=-500;
      ufo.active=false;
      ufo.y=-100;
      ufo.scale=0.5;
    }
  }
}

/* DRAW */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // sky
  ctx.fillStyle="#020a2a";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // stars
  ctx.font="16px sans-serif";
  stars.forEach(s=>{
    ctx.fillText(s.emoji, s.x - scrollX*0.2, s.y);
  });

  // clouds
  ctx.font="48px sans-serif";
  clouds.forEach(c=>{
    ctx.fillText("‚òÅÔ∏è", c.x - scrollX*0.15, c.y);
  });

  // city buildings
  ctx.font="130px sans-serif";
  cityBuildings.forEach(b=>{
    ctx.fillText(b.emoji, b.x - scrollX, canvas.height-roadH-grassH+10);
  });

  // grass
  ctx.fillStyle="#2f7d32";
  ctx.fillRect(0, canvas.height-roadH-grassH, canvas.width, grassH);

  // forest
  ctx.font="80px sans-serif";
  forestTrees.forEach(t=>{
    ctx.fillText(t.emoji, t.x - scrollX, canvas.height-roadH-grassH+10);
  });

  // road
  ctx.fillStyle="#555";
  ctx.fillRect(0, canvas.height-roadH, canvas.width, roadH);

  // farm elements
  farmObjects.forEach(o=>{
    ctx.font=`${o.height}px sans-serif`;
    ctx.fillText(o.emoji, o.x - scrollX, canvas.height-roadH-grassH + (grassH-o.height));
  });

  // UFO
  if(ufo.active){
    ctx.font=`${ufo.size*ufo.scale}px sans-serif`;
    ctx.fillText("üõ∏", ufo.x - scrollX, ufo.y);
  }

  // moon
  ctx.font="80px sans-serif";
  ctx.fillText("üåñ", 200-scrollX, 100);

  // player
  const img = player.dir==="right"? runnerRight:runnerLeft;
  ctx.drawImage(img, player.x, player.y - 56, 56, 56);
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
