<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality Space Adventures</title>
<style>
    body { margin:0; overflow:hidden; background:#222; font-family:sans-serif; }
    canvas { display:block; }
    .button { 
        position: fixed; 
        font-size: 48px; 
        background:#ffcc00; 
        color:#000; 
        padding: 12px 20px; 
        border-radius:8px; 
        user-select:none; 
        z-index:1000;
    }
    #left { left:20px; bottom:20px; }
    #right { left:120px; bottom:20px; }
    #jump { right:20px; bottom:20px; }
</style>
</head>
<body>

<div id="left" class="button">â—€</div>
<div id="right" class="button">â–¶</div>
<div id="jump" class="button">â¬†</div>

<canvas id="gameCanvas" width="800" height="600"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const WIDTH = canvas.width;
const HEIGHT = canvas.height;

const ROAD_Y = HEIGHT - 80;
const GREEN_HEIGHT = 160; 

let player = { x:WIDTH-100, y:ROAD_Y-64, w:64, h:64, vy:0, jumping:false };
let mochkil = { x:WIDTH-150, y:ROAD_Y-64, w:64, h:64 };
let foods = [];
let decorations = [];

let leftDown=false, rightDown=false, jumpDown=false;
let scrollX=0;

// ---- Buttons ----
document.getElementById('left').addEventListener('touchstart', ()=>leftDown=true);
document.getElementById('left').addEventListener('touchend', ()=>leftDown=false);
document.getElementById('right').addEventListener('touchstart', ()=>rightDown=true);
document.getElementById('right').addEventListener('touchend', ()=>rightDown=false);
document.getElementById('jump').addEventListener('touchstart', ()=>jumpDown=true);
document.getElementById('jump').addEventListener('touchend', ()=>jumpDown=false);

const DECOR_EMOJIS = ['ğŸŒ²','ğŸŒ³','ğŸ¡','ğŸ '];
const FOOD_EMOJIS = ['ğŸ•','ğŸŒ®'];

// ---- Clouds and Rainbow ----
const clouds = [
    {x:200, y:50},
    {x:450, y:80},
    {x:650, y:40}
];
// Rainbow raised so bottom touches top of green band
const rainbow = {x:WIDTH-64, y:ROAD_Y - GREEN_HEIGHT + 64, emoji:"ğŸŒˆ"}; // flush right, stationary

// ---- Pre-generate some items for starting screen ----
for(let i=0; i<10; i++){
    let fx = player.x - i*80;
    foods.push({ x:fx, y:ROAD_Y-48, emoji:FOOD_EMOJIS[Math.floor(Math.random()*FOOD_EMOJIS.length)], collected:false });
    let dx = player.x - i*150 - 100;
    let dy = ROAD_Y - GREEN_HEIGHT + 20 + Math.random()*(GREEN_HEIGHT - 60);
    decorations.push({ x:dx, y:dy, emoji:DECOR_EMOJIS[Math.floor(Math.random()*DECOR_EMOJIS.length)] });
}

// ---- Game loop ----
function gameLoop(){
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

// ---- Update positions ----
function update(){
    // Move player
    if(leftDown) player.x -=5;
    if(rightDown) player.x +=5;
    if(jumpDown && !player.jumping){ player.vy=-12; player.jumping=true; }

    // Gravity
    player.vy += 0.6;
    player.y += player.vy;
    if(player.y > ROAD_Y - player.h){ 
        player.y = ROAD_Y - player.h; 
        player.vy=0; 
        player.jumping=false; 
    }

    // Mochkil follows player
    let dx = player.x - mochkil.x;
    mochkil.x += dx * 0.05;
    mochkil.y = ROAD_Y - mochkil.h;

    // Scroll world
    scrollX = player.x - (WIDTH-150);

    // Spawn food dynamically ahead
    if(Math.random()<0.02){
        let fx = player.x - WIDTH - Math.random()*400;
        foods.push({ x:fx, y:ROAD_Y-48, emoji:FOOD_EMOJIS[Math.floor(Math.random()*FOOD_EMOJIS.length)], collected:false });
    }

    // Spawn decorations dynamically ahead
    if(Math.random()<0.03){
        let dx = player.x - WIDTH - Math.random()*500;
        let dy = ROAD_Y - GREEN_HEIGHT + 20 + Math.random()*(GREEN_HEIGHT - 60);
        decorations.push({ x:dx, y:dy, emoji:DECOR_EMOJIS[Math.floor(Math.random()*DECOR_EMOJIS.length)] });
    }

    // Mochkil collects food
    foods.forEach(f=>{
        if(!f.collected && Math.abs(f.x - mochkil.x)<40){
            f.collected=true;
        }
    });

    // Remove old food/decorations far behind
    foods = foods.filter(f=>f.x > player.x - WIDTH*2);
    decorations = decorations.filter(d=>d.x > player.x - WIDTH*2);

    // Keep foods on top of grey road
    foods.forEach(f => { f.y = ROAD_Y - 48; });
}

// ---- Draw everything ----
function draw(){
    ctx.clearRect(0,0,WIDTH,HEIGHT);

    // ---- Sky ----
    ctx.fillStyle="#87ceeb";
    ctx.fillRect(0, 0, WIDTH, ROAD_Y - GREEN_HEIGHT);

    // ---- Sun/cloud â›… ----
    ctx.font="48px sans-serif";
    ctx.fillText("â›…ï¸", 20, 50);

    // ---- Clouds â˜ï¸ ----
    clouds.forEach(c=>{
        ctx.fillText("â˜ï¸", c.x, c.y);
    });

    // ---- Rainbow ğŸŒˆ (stationary) ----
    ctx.font="64px sans-serif";
    ctx.fillText(rainbow.emoji, rainbow.x, rainbow.y);

    // ---- Green grass ----
    ctx.fillStyle="#2ecc71";
    ctx.fillRect(0, ROAD_Y - GREEN_HEIGHT, WIDTH, GREEN_HEIGHT);

    // ---- Decorations in green area ----
    decorations.forEach(d=>{
        if(d.x > scrollX - 100 && d.x < scrollX + WIDTH + 100){
            ctx.font="48px sans-serif";
            ctx.fillText(d.emoji, d.x - scrollX, d.y);
        }
    });

    // ---- Grey road ----
    ctx.fillStyle="#666";
    ctx.fillRect(0, ROAD_Y, WIDTH, 80);

    // ---- Foods ----
    foods.forEach(f=>{
        if(!f.collected){
            ctx.font="48px sans-serif";
            ctx.fillText(f.emoji, f.x - scrollX, f.y);
        }
    });

    // ---- Player ğŸƒâ€â™€ï¸ ----
    ctx.font="64px sans-serif";
    ctx.fillText("ğŸƒâ€â™€ï¸", player.x - scrollX, player.y);

    // ---- Mochkil ğŸ¦ ----
    ctx.fillText("ğŸ¦", mochkil.x - scrollX, mochkil.y);
}

gameLoop();
</script>

</body>
</html>
