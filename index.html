<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality ‚Äì Night Run</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
  margin:0; padding:0;
  overflow:hidden;
  background:#020a2a;
  touch-action:none;
  font-family:sans-serif;
}
#game { display:block; }
#controls{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:12px;
  z-index:10;
}
button{
  font-size:26px;
  padding:12px 18px;
  border-radius:12px;
  border:none;
  background:#222;
  color:#fff;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="controls">
  <button id="left">‚¨ÖÔ∏è</button>
  <button id="jump">‚¨ÜÔ∏è</button>
  <button id="right">‚û°Ô∏è</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){ canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
resize();
window.addEventListener("resize", resize);

/* PLAYER IMAGES */
const runnerRight = new Image(); runnerRight.src="IMG_2161.png";
const runnerLeft = new Image(); runnerLeft.src="IMG_2162.png";

/* WORLD LAYOUT */
const roadH = 80;
const grassH = 120;
const groundY = canvas.height - roadH;

/* PLAYER */
const player = { x: canvas.width/2, y: groundY-56, vy:0, jumping:false, dir:"right" };

/* SCROLL */
let scrollX = 0;

/* INPUT */
let left=false, right=false, jump=false;
function bind(btn, down, up){
  btn.addEventListener("touchstart", e=>{e.preventDefault(); down();});
  btn.addEventListener("touchend", e=>{e.preventDefault(); up();});
}
bind(document.getElementById("left"), ()=>left=true, ()=>left=false);
bind(document.getElementById("right"), ()=>right=true, ()=>right=false);
bind(document.getElementById("jump"), ()=>jump=true, ()=>jump=false);

/* SKY ELEMENTS */
const stars = Array.from({length:200},()=>({x:Math.random()*10000, y:Math.random()*300, emoji:["‚≠êÔ∏è","‚ú®","üåü"][Math.floor(Math.random()*3)]}));
const clouds = [{x:200,y:120},{x:600,y:160},{x:1000,y:100}];

/* CITY BUILDINGS */
const buildings=[];
for(let i=0;i<20;i++){
  const size=120;
  buildings.push({x:i*200, y:groundY-size, size, emoji:["üè¢","üè¨","üè≠","üè®","üè¶","üè•","üè†","üè°","üïå","‚õ™Ô∏è","üèüÔ∏è"][i%11]});
}

/* FOREST TREES */
const trees=[];
for(let i=0;i<15;i++){
  const size=80+Math.random()*40;
  trees.push({x:3000+i*150, y:groundY-size, size, emoji:i%2===0?"üå≤":"üå≥"});
}

/* FARM SCENE */
const farm=[
  {emoji:"üè†", x:4800, y:0, width:100, height:100}, // will set y below
  {emoji:"üåæ", x:4750, y:0, width:20, height:20},
  {emoji:"üåæ", x:4850, y:0, width:20, height:20},
  {emoji:"üöú", x:4700, y:0, width:60, height:60},
  {emoji:"üêì", x:4720, y:0, width:20, height:20},
  {emoji:"üêì", x:4870, y:0, width:20, height:20},
  {emoji:"üêë", x:4780, y:0, width:30, height:30},
  {emoji:"üêñ", x:4820, y:0, width:25, height:25},
  {emoji:"üêÑ", x:4800, y:0, width:50, height:50, abducted:false},
  {emoji:"üêà", x:4760, y:0, width:15, height:15}
];
// set baseline
farm.forEach(f=>{f.y=groundY-f.height;});

/* UFO */
const ufo={active:false, x:4800, y:groundY-200, size:60, step:0};

/* GAME LOOP */
function update(){
  /* SCROLL */
  if(left){scrollX-=5; player.dir="left";}
  if(right){scrollX+=5; player.dir="right";}

  /* JUMP */
  if(jump && !player.jumping){player.vy=-18; player.jumping=true;}
  player.vy+=1;
  player.y+=player.vy;
  if(player.y>groundY-56){player.y=groundY-56; player.vy=0; player.jumping=false;}

  /* UFO abduction */
const cow = farm.find(f => f.emoji === "üêÑ");
if (!cow.abducted && !ufo.active && ufo.step === 0) {
  // start UFO immediately
  ufo.active = true;
  ufo.step = 0;
  ufo.y = cow.y - 200;
}
if (ufo.active) {
  ufo.step += 1;
  // swoop motion
  ufo.y = cow.y - 200 - Math.sin(ufo.step / 20) * 30;
  cow.y -= 1.5; // cow rises
  if (cow.y < ufo.y + 20) {
    cow.abducted = true;
    ufo.active = false;
  }
}
if (cow.abducted) cow.y = ufo.y;}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  /* SKY */
  ctx.fillStyle="#020a2a";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  /* STARS */
  ctx.font="16px sans-serif";
  stars.forEach(s=>ctx.fillText(s.emoji,s.x-scrollX*0.2,s.y));

  /* CLOUDS */
  ctx.font="48px sans-serif";
  clouds.forEach(c=>ctx.fillText("‚òÅÔ∏è",c.x-scrollX*0.15,c.y));

  /* MOON */
  ctx.font="60px sans-serif";
  ctx.fillText("üåñ",100-scrollX*0.05,100);

  /* GRASS */
  ctx.fillStyle="#2f7d32";
  ctx.fillRect(0,groundY-grassH,canvas.width,grassH);

  /* CITY */
  ctx.font="120px sans-serif";
  buildings.forEach(b=>ctx.fillText(b.emoji,b.x-scrollX,b.y));

  /* TREES */
  trees.forEach(t=>{ctx.font=t.size+"px sans-serif"; ctx.fillText(t.emoji,t.x-scrollX,t.y);});

  /* FARM */
  farm.forEach(f=>{ctx.font=f.height+"px sans-serif"; if(!f.abducted) ctx.fillText(f.emoji,f.x-scrollX,f.y);});

  /* UFO */
  if(ufo.active){ctx.font=ufo.size+"px sans-serif"; ctx.fillText("üõ∏",ufo.x-scrollX,ufo.y);}

  /* ROAD */
  ctx.fillStyle="#555";
  ctx.fillRect(0,groundY,canvas.width,roadH);

  /* PLAYER */
  const img = player.dir==="right"?runnerRight:runnerLeft;
  ctx.drawImage(img,player.x,player.y-56,56,56);
}

function loop(){update(); draw(); requestAnimationFrame(loop);}
loop();
</script>

</body>
</html>
