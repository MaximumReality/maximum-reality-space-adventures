<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality ‚Äì Night Run</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#020a2a;
  touch-action:none;
  font-family:sans-serif;
}
#game{ display:block; }
#controls{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:12px;
  z-index:10;
}
button{
  font-size:26px;
  padding:12px 18px;
  border-radius:12px;
  border:none;
  background:#222;
  color:#fff;
}
</style>
</head>

<body>
<canvas id="game"></canvas>
<div id="controls">
  <button id="left">‚¨ÖÔ∏è</button>
  <button id="jump">‚¨ÜÔ∏è</button>
  <button id="right">‚û°Ô∏è</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){ canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
resize();
window.addEventListener("resize", resize);

/* PLAYER IMAGES */
const runnerRight = new Image();
runnerRight.src = "IMG_2161.png";
const runnerLeft = new Image();
runnerLeft.src = "IMG_2162.png";

/* WORLD LAYOUT */
const roadH = 80;
const grassH = 120;

/* PLAYER */
const player = { x: canvas.width/2, y: 0, vy:0, jumping:false, dir:"right" };

/* SCROLL */
let scrollX = 0;

/* INPUT */
let left=false, right=false, jump=false;
function bind(btn, down, up){
  btn.addEventListener("touchstart", e=>{ e.preventDefault(); down(); });
  btn.addEventListener("touchend", e=>{ e.preventDefault(); up(); });
}
bind(document.getElementById("left"), ()=>left=true, ()=>left=false);
bind(document.getElementById("right"), ()=>right=true, ()=>right=false);
bind(document.getElementById("jump"), ()=>jump=true, ()=>jump=false);

/* STARS */
const stars=[];
for(let i=0;i<200;i++){
  stars.push({ x:Math.random()*8000, y:Math.random()*300, emoji:["‚≠êÔ∏è","‚ú®","üåü"][i%3] });
}

/* CLOUDS */
const clouds=[{x:200,y:120},{x:600,y:160},{x:1000,y:100}];

/* CITY BUILDINGS (left) */
const buildings=[];
for(let i=0;i<20;i++){
  buildings.push({ x:i*180, emoji:["üè¢","üè¨","üè≠","üè®","üè¶","üè•","üè†","üè°","üïå","‚õ™Ô∏è","üèüÔ∏è"][i%11] });
}

/* FARM (right) */
const farmX = 3000; // anchored X
const farmHouse = { x: farmX, y: canvas.height-roadH-grassH+10, size:100, emoji:"üè†" };
const farmAnimals = [
  { emoji:"üêÑ", x:farmX+150, y:canvas.height-roadH-60, size:50, abducted:false },
  { emoji:"üêë", x:farmX+250, y:canvas.height-roadH-50, size:30 },
  { emoji:"üêñ", x:farmX+300, y:canvas.height-roadH-50, size:35 },
  { emoji:"üêì", x:farmX+200, y:canvas.height-roadH-50, size:20 },
  { emoji:"üêì", x:farmX+220, y:canvas.height-roadH-50, size:20 },
  { emoji:"üêà", x:farmX+180, y:canvas.height-roadH-40, size:15 },
  { emoji:"üåæ", x:farmX+160, y:canvas.height-roadH-70, size:12 },
  { emoji:"üåæ", x:farmX+240, y:canvas.height-roadH-70, size:12 },
  { emoji:"üöú", x:farmX+120, y:canvas.height-roadH-60, size:50 }
];

/* UFO */
const ufo = { active:false, x:0, y:0, step:0, size:60 };

/* LOOP */
function update(){
  if(left){ scrollX -= 5; player.dir="left"; }
  if(right){ scrollX += 5; player.dir="right"; }

  if(jump && !player.jumping){ player.vy=-18; player.jumping=true; }
  player.vy+=1;
  player.y+=player.vy;

  const groundY = canvas.height-roadH-18;
  if(player.y>groundY){ player.y=groundY; player.vy=0; player.jumping=false; }

  /* UFO logic near cow */
  const cow = farmAnimals.find(f=>f.emoji==="üêÑ");
  if(!ufo.active && scrollX+canvas.width/2 > cow.x-200 && !cow.abducted && Math.random()<0.01){
    ufo.active=true;
    ufo.x=cow.x;
    ufo.y=cow.y-200;
    ufo.step=0;
  }
  if(ufo.active){
    ufo.step++;
    ufo.y = (cow.y-200) - Math.sin(ufo.step/20)*30;
    if(ufo.step>120){
      cow.abducted=true;
      ufo.active=false;
    }
  }
  if(cow.abducted) cow.y = ufo.y;
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  /* SKY */
  ctx.fillStyle="#020a2a";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  /* STARS */
  ctx.font="16px sans-serif";
  stars.forEach(s=>{
    ctx.fillText(s.emoji, s.x-scrollX*0.2, s.y);
  });

  /* CLOUDS */
  ctx.font="48px sans-serif";
  clouds.forEach(c=>{
    ctx.fillText("‚òÅÔ∏è", c.x-scrollX*0.15, c.y);
  });

  /* GRASS */
  ctx.fillStyle="#2f7d32";
  ctx.fillRect(0, canvas.height-roadH-grassH, canvas.width, grassH);

  /* CITY */
  ctx.font="120px sans-serif";
  buildings.forEach(b=>{
    ctx.fillText(b.emoji, b.x-scrollX*0.5, canvas.height-roadH-grassH+10);
  });

  /* FARM HOUSE */
  ctx.font=farmHouse.size+"px sans-serif";
  ctx.fillText(farmHouse.emoji, farmHouse.x-scrollX, farmHouse.y);

  /* FARM ANIMALS */
  farmAnimals.forEach(a=>{
    ctx.font=a.size+"px sans-serif";
    ctx.fillText(a.emoji, a.x-scrollX, a.y);
  });

  /* ROAD */
  ctx.fillStyle="#555";
  ctx.fillRect(0, canvas.height-roadH, canvas.width, roadH);

  /* PLAYER */
  const img = player.dir==="right"? runnerRight : runnerLeft;
  ctx.drawImage(img, player.x, player.y-56, 56, 56);

  /* UFO */
  if(ufo.active){
    ctx.font=ufo.size+"px sans-serif";
    ctx.fillText("üõ∏", ufo.x-scrollX, ufo.y);
  }
}

function loop(){ update(); draw(); requestAnimationFrame(loop); }
loop();
</script>
</body>
</html>
