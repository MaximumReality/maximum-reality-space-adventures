<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality ‚Äì Night Run</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#020a2a;
  touch-action:none;
  font-family:sans-serif;
}
#game{ display:block; }
#controls{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:12px;
  z-index:10;
}
button{
  font-size:26px;
  padding:12px 18px;
  border-radius:12px;
  border:none;
  background:#222;
  color:#fff;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<div id="controls">
  <button id="left">‚¨ÖÔ∏è</button>
  <button id="jump">‚¨ÜÔ∏è</button>
  <button id="right">‚û°Ô∏è</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* PLAYER IMAGES */
const runnerRight = new Image();
runnerRight.src = "IMG_2161.png";
const runnerLeft = new Image();
runnerLeft.src = "IMG_2162.png";

/* WORLD LAYOUT */
const roadH = 80;
const grassH = 120;

/* PLAYER */
const player = { x: 200, y:0, vy:0, jumping:false, dir:"right" };
let scrollX = 0;
let left=false, right=false, jump=false;

function bind(btn, down, up){
  btn.addEventListener("touchstart", e=>{ e.preventDefault(); down(); });
  btn.addEventListener("touchend", e=>{ e.preventDefault(); up(); });
}
bind(document.getElementById("left"), ()=>left=true, ()=>left=false);
bind(document.getElementById("right"), ()=>right=true, ()=>right=false);
bind(document.getElementById("jump"), ()=>jump=true, ()=>jump=false);

/* CITY BUILDINGS */
const cityBuildings = [];
for(let i=0;i<20;i++){
  cityBuildings.push({x:i*200, emoji:["üè¢","üè¨","üè≠","üè®","üè¶","üè•","üè†","üè°","üïå","‚õ™Ô∏è","üèüÔ∏è"][i%11]});
}

/* FOREST TREES */
const forest = [];
for(let i=0;i<25;i++){
  forest.push({x:4200+i*160, emoji: i%2===0?"üå≤":"üå≥", size: 80 + Math.random()*40});
}

/* FARM OBJECTS */
const farmObjects = [
  {x:5600, emoji:"üè†", w:120},
  {x:5650, emoji:"üåæ", w:20},
  {x:5700, emoji:"üåæ", w:20},
  {x:5750, emoji:"üêì", w:25},
  {x:5780, emoji:"üêì", w:25},
  {x:5820, emoji:"üêë", w:35},
  {x:5850, emoji:"üêñ", w:40},
  {x:5900, emoji:"üêÑ", w:60, abducted:false},
  {x:5950, emoji:"üöú", w:60},
  {x:5980, emoji:"üêà", w:20}
];

/* STARS */
const stars=[];
for(let i=0;i<120;i++){
  stars.push({x:i*100, y:Math.random()*300, emoji:["‚≠êÔ∏è","‚ú®","üåü"][i%3]});
}

/* CLOUDS */
const clouds=[{x:200,y:120},{x:600,y:160},{x:1000,y:100}];

/* MOON */
const moon={x:80,y:80,emoji:"üåñ"};

/* UFO */
const ufo={x:5900,y:-100,size:60,scale:0.5,active:false, targetCow:null};

/* LOOP LOGIC */
function update(){
  if(left){ scrollX -=5; player.dir="left"; }
  if(right){ scrollX +=5; player.dir="right"; }

  if(jump && !player.jumping){ player.vy=-18; player.jumping=true; }

  player.vy += 1;
  player.y += player.vy;
  const groundY = canvas.height - roadH - 18;
  if(player.y>groundY){ player.y=groundY; player.vy=0; player.jumping=false; }

  // UFO logic: target the cow
  const cow = farmObjects.find(o=>o.emoji==="üêÑ");
  if(!ufo.active && scrollX+player.x>5800){ 
    ufo.active=true; 
    ufo.y=-100; 
    ufo.scale=0.5; 
    ufo.targetCow=cow; 
    cow.abducted=false; 
    cow.y=canvas.height-roadH-60;
  }
  if(ufo.active && ufo.targetCow){
    const c = ufo.targetCow;
    // UFO swoops
    if(ufo.y<c.y-50) ufo.y+=4, ufo.scale+=0.01;
    // Cow rises
    if(!c.abducted && c.y>ufo.y+10) c.y-=4;
    // Cow disappears into UFO
    if(c.y<=ufo.y+10){ c.abducted=true; c.y=-500; ufo.y=-100; ufo.scale=0.5; ufo.active=false; ufo.targetCow=null; }
  }
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // SKY
  ctx.fillStyle="#020a2a";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // STARS
  ctx.font="16px sans-serif";
  stars.forEach(s=>ctx.fillText(s.emoji, s.x - scrollX*0.2, s.y));

  // CLOUDS
  ctx.font="48px sans-serif";
  clouds.forEach(c=>ctx.fillText("‚òÅÔ∏è", c.x - scrollX*0.15, c.y));

  // GRASS
  ctx.fillStyle="#2f7d32";
  ctx.fillRect(0, canvas.height-roadH-grassH, canvas.width, grassH);

  // CITY
  ctx.font="120px sans-serif";
  cityBuildings.forEach(b=>ctx.fillText(b.emoji, b.x - scrollX, canvas.height-roadH-grassH+10));

  // FOREST
  forest.forEach(t=>{
    ctx.font=`${t.size}px sans-serif`;
    ctx.fillText(t.emoji, t.x - scrollX, canvas.height-roadH-grassH+10);
  });

  // FARM
  farmObjects.forEach(f=>{
    ctx.font=`${f.w}px sans-serif`;
    if(!f.abducted) ctx.fillText(f.emoji, f.x - scrollX, canvas.height-roadH-grassH+10);
  });

  // ROAD
  ctx.fillStyle="#555";
  ctx.fillRect(0, canvas.height-roadH, canvas.width, roadH);

  // MOON
  ctx.font="48px sans-serif";
  ctx.fillText(moon.emoji, moon.x, moon.y);

  // PLAYER
  const img = player.dir==="right"? runnerRight: runnerLeft;
  ctx.drawImage(img, player.x, player.y-56, 56, 56);

  // UFO
  if(ufo.active){ ctx.font=`${ufo.size*ufo.scale}px sans-serif`; ctx.fillText("üõ∏", ufo.x - scrollX, ufo.y); }
}

function loop(){ update(); draw(); requestAnimationFrame(loop); }
loop();
</script>

</body>
</html>
