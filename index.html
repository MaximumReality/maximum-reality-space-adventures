<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality ‚Äì Night Run</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
  margin:0; padding:0;
  overflow:hidden;
  background:#020a2a;
  touch-action:none;
  font-family:sans-serif;
}
#game { display:block; }
#controls{
  position:fixed; bottom:10px; left:50%; transform:translateX(-50%);
  display:flex; gap:12px; z-index:10;
}
button{
  font-size:26px; padding:12px 18px;
  border-radius:12px; border:none;
  background:#222; color:#fff;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="controls">
  <button id="left">‚¨ÖÔ∏è</button>
  <button id="jump">‚¨ÜÔ∏è</button>
  <button id="right">‚û°Ô∏è</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* WORLD LAYOUT */
const roadH = 80;
const grassH = 120;

/* PLAYER */
const player = {
  x: canvas.width/2,
  y: 0,
  vy:0,
  jumping:false,
  dir:"right"
};

/* SCROLL */
let scrollX = 0;

/* INPUT */
let left=false, right=false, jump=false;
function bind(btn, down, up){
  btn.addEventListener("touchstart", e=>{e.preventDefault(); down();});
  btn.addEventListener("touchend", e=>{e.preventDefault(); up();});
}
bind(document.getElementById("left"), ()=>left=true, ()=>left=false);
bind(document.getElementById("right"), ()=>right=true, ()=>right=false);
bind(document.getElementById("jump"), ()=>jump=true, ()=>jump=false);

/* PLAYER IMAGES */
const runnerRight = new Image(); runnerRight.src="IMG_2161.png";
const runnerLeft  = new Image(); runnerLeft.src="IMG_2162.png";

/* CITY BUILDINGS */
const cityBuildings = [];
for(let i=0;i<10;i++){
  cityBuildings.push({x:i*180, emoji:["üè¢","üè¨","üè≠","üè®","üè¶","üè•","üè†","üè°","üïå","‚õ™Ô∏è"][i%10]});
}

/* FARM */
const farmHouse = {x:1800, emoji:"üè†", width:100, height:100};
const farmObjects = [
  {emoji:"üêÑ", x:1800+50, y:0, width:50, height:50},
  {emoji:"üöú", x:1800+120, y:0, width:50, height:50},
  {emoji:"üêë", x:1800+180, y:0, width:30, height:30},
  {emoji:"üêñ", x:1800+230, y:0, width:25, height:25},
  {emoji:"üêà", x:1800+280, y:0, width:20, height:20},
  {emoji:"üêì", x:1800+320, y:0, width:15, height:15},
  {emoji:"üåæ", x:1800+360, y:0, width:10, height:10}
];

/* TREES */
const trees = [];
for(let i=0;i<10;i++){
  trees.push({x:1600+i*120, emoji:i%2===0?"üå≤":"üå≥"});
}

/* SKY DECOR */
const stars = [];
for(let i=0;i<120;i++){
  stars.push({x:Math.random()*3000, y:Math.random()*200, emoji:["‚≠êÔ∏è","‚ú®","üåü"][i%3]});
}
const clouds = [{x:200,y:120},{x:600,y:160},{x:1000,y:100}];
const moon = {x:100, y:50, emoji:"üåñ"};

/* UFO ABDUCTION */
let ufo = {x: farmObjects[0].x, y: 0, size:60, active:false};
let abducted = false;

function resetUFO(){
  ufo.y=0;
  ufo.size=60;
  ufo.active=false;
  abducted=false;
  farmObjects[0].y=0; // reset cow
}

/* UPDATE LOOP */
function update(){
  // Player movement
  if(left){scrollX -=5; player.dir="left";}
  if(right){scrollX +=5; player.dir="right";}
  if(jump && !player.jumping){player.vy=-18; player.jumping=true;}

  player.vy +=1; player.y += player.vy;
  const groundY = canvas.height-roadH-18;
  if(player.y>groundY){player.y=groundY; player.vy=0; player.jumping=false;}

  // UFO abduction logic
  if(!ufo.active && Math.random()<0.002){ufo.active=true;} // occasionally trigger
  if(ufo.active){
    if(!abducted){
      // cow rises
      farmObjects[0].y -=3;
      // UFO swoops down
      if(ufo.y<farmObjects[0].y-30) ufo.y+=2;
      else abducted=true;
    } else {
      ufo.y-=2;
      farmObjects[0].y = ufo.y;
      if(ufo.y<-100) resetUFO();
    }
  }
}

/* DRAW LOOP */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Sky
  ctx.fillStyle="#020a2a";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Stars
  ctx.font="16px sans-serif";
  stars.forEach(s=>ctx.fillText(s.emoji, s.x-scrollX*0.2, s.y));

  // Moon
  ctx.font="48px sans-serif";
  ctx.fillText(moon.emoji, moon.x-scrollX*0.2, moon.y);

  // Clouds
  ctx.font="48px sans-serif";
  clouds.forEach(c=>ctx.fillText("‚òÅÔ∏è", c.x - scrollX*0.15, c.y));

  // Grass
  ctx.fillStyle="#2f7d32";
  ctx.fillRect(0, canvas.height-roadH-grassH, canvas.width, grassH);

  // City buildings
  ctx.font="180px sans-serif";
  cityBuildings.forEach(b=>{
    ctx.fillText(b.emoji, b.x-scrollX*0.5, canvas.height-roadH-grassH+10);
  });

  // Trees
  ctx.font="100px sans-serif";
  trees.forEach(t=>ctx.fillText(t.emoji, t.x-scrollX, canvas.height-roadH-grassH+10));

  // Farm house
  ctx.font=farmHouse.width+"px sans-serif";
  ctx.fillText(farmHouse.emoji, farmHouse.x-scrollX, canvas.height-roadH-grassH);

  // Farm objects
  farmObjects.forEach(f=>{
    ctx.font=f.width+"px sans-serif";
    ctx.fillText(f.emoji, f.x-scrollX, canvas.height-roadH-grassH-f.y);
  });

  // UFO
  if(ufo.active){
    ctx.font=ufo.size+"px sans-serif";
    ctx.fillText("üõ∏", ufo.x-scrollX, canvas.height-roadH-grassH-ufo.y);
  }

  // Road
  ctx.fillStyle="#555";
  ctx.fillRect(0, canvas.height-roadH, canvas.width, roadH);

  // Player
  const img = player.dir==="right"? runnerRight : runnerLeft;
  ctx.drawImage(img, player.x, player.y-56, 56, 56);
}

/* LOOP */
function loop(){ update(); draw(); requestAnimationFrame(loop); }
loop();
</script>

</body>
</html>
