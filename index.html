<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality ‚Äì Night Run Emoji</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#020a2a;
  font-family:sans-serif;
}
#controls{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:12px;
  z-index:10;
}
button{
  font-size:26px;
  padding:12px 18px;
  border-radius:12px;
  border:none;
  background:#222;
  color:#fff;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="controls">
  <button id="left">‚¨ÖÔ∏è</button>
  <button id="jump">‚¨ÜÔ∏è</button>
  <button id="right">‚û°Ô∏è</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* WORLD LAYOUT */
const ROAD_H = 80;
const GRASS_H = 120;
const groundY = canvas.height - ROAD_H - 18;

/* PLAYER */
const player = {
  x: canvas.width/2,
  y: groundY,
  vy:0,
  jumping:false,
  dir:"right",
  emoji:"üèÉüèº‚Äç‚ôÄÔ∏è‚Äç‚û°Ô∏è"
};

/* SCROLL */
let scrollX = 0;

/* INPUT */
let left=false, right=false, jump=false;

function bind(btn, down, up){
  btn.addEventListener("touchstart", e=>{e.preventDefault(); down();});
  btn.addEventListener("touchend", e=>{e.preventDefault(); up();});
}
bind(document.getElementById("left"), ()=>left=true, ()=>left=false);
bind(document.getElementById("right"), ()=>right=true, ()=>right=false);
bind(document.getElementById("jump"), ()=>jump=true, ()=>jump=false);

/* SKY STARS */
const stars = [];
for(let i=0;i<200;i++){
  stars.push({
    x:Math.random()*10000,
    y:Math.random()*200,
    emoji:["‚≠êÔ∏è","‚ú®","üåü"][i%3]
  });
});

/* CLOUDS */
const clouds = [
  {x:200,y:120},{x:600,y:160},{x:1000,y:100}
];

/* CITY BUILDINGS */
const buildings = [];
for(let i=0;i<10;i++){
  buildings.push({x: i*200, emoji:["üè¢","üè¨","üè≠","üè®","üè¶"][i%5], y: groundY-100});
}

/* FOREST TREES */
const trees = [];
for(let i=0;i<15;i++){
  trees.push({x: 3000 + i*150, y: groundY-20, emoji:i%2===0?"üå≤":"üå≥", size:80 + Math.random()*40});
}

/* FARM SCENE */
const farm = [
  {emoji:"üè†",x:4500,y:groundY-70,width:100,height:100},
  {emoji:"üåæ",x:4470,y:groundY+10,width:20,height:20},
  {emoji:"üåæ",x:4540,y:groundY+15,width:20,height:20},
  {emoji:"üöú",x:4400,y:groundY+10,width:60,height:60},
  {emoji:"üêì",x:4420,y:groundY+30,width:20,height:20},
  {emoji:"üêì",x:4560,y:groundY+35,width:20,height:20},
  {emoji:"üêë",x:4480,y:groundY+30,width:30,height:30},
  {emoji:"üêñ",x:4520,y:groundY+30,width:25,height:25},
  {emoji:"üêÑ",x:4500,y:groundY+40,width:50,height:50,abducted:false},
  {emoji:"üêà",x:4460,y:groundY+30,width:15,height:15}
];

/* UFO */
const ufo = {active:false,x:4500,y:groundY-200,size:60,step:0,scale:1};

/* UPDATE LOOP */
function update(){
  // scroll
  if(left){scrollX-=5; player.dir="left";}
  if(right){scrollX+=5; player.dir="right";}

  // jump
  if(jump && !player.jumping){
    player.vy=-18;
    player.jumping=true;
  }

  player.vy+=1;
  player.y+=player.vy;
  if(player.y>groundY){player.y=groundY; player.vy=0; player.jumping=false;}

  // set player emoji
  if(player.jumping) player.emoji="üßçüèº‚Äç‚ôÄÔ∏è";
  else player.emoji = (player.dir==="right")?"üèÉüèº‚Äç‚ôÄÔ∏è‚Äç‚û°Ô∏è":"üèÉüèº‚Äç‚ôÄÔ∏è";

  // UFO abduction
  const cow = farm.find(f=>f.emoji==="üêÑ");
  if(!ufo.active && !cow.abducted && Math.random()<0.002){
    ufo.active=true;
    ufo.step=0;
    ufo.y=cow.y-200;
    ufo.scale=0.6;
  }
  if(ufo.active && !cow.abducted){
    ufo.step+=1;
    // UFO swoop
    ufo.y = cow.y - 200 - Math.sin(ufo.step/20)*30;
    ufo.scale = 0.6 + 0.4*(ufo.step/100); // grows as it approaches
    cow.y -= 1.5; // cow rises
    if(cow.y <= ufo.y+20){
      cow.abducted=true;
    }
  }

  // UFO disappearance
  if(cow.abducted){
    ufo.y -=2;
    ufo.scale -= 0.01;
    if(ufo.scale<=0){ 
      ufo.active=false; 
      cow.y = groundY+40; // reset cow
      cow.abducted=false;
      ufo.scale=1;
      ufo.y=groundY-200;
    }
  }
}

/* DRAW LOOP */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // sky
  ctx.fillStyle="#020a2a";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // stars
  ctx.font="16px sans-serif";
  stars.forEach(s=>ctx.fillText(s.emoji,s.x-scrollX*0.2,s.y));

  // clouds
  ctx.font="48px sans-serif";
  clouds.forEach(c=>ctx.fillText("‚òÅÔ∏è",c.x-scrollX*0.15,c.y));

  // moon
  ctx.font="60px sans-serif";
  ctx.fillText("üåñ",100 - scrollX*0.05,100);

  // grass
  ctx.fillStyle="#2f7d32";
  ctx.fillRect(0,groundY,canvas.width,GRASS_H);

  // road
  ctx.fillStyle="#555";
  ctx.fillRect(0,canvas.height-ROAD_H,canvas.width,ROAD_H);

  // buildings
  ctx.font="120px sans-serif";
  buildings.forEach(b=>ctx.fillText(b.emoji,b.x-scrollX*0.5,b.y));

  // trees
  trees.forEach(t=>{
    ctx.font=t.size+"px sans-serif";
    ctx.fillText(t.emoji,t.x-scrollX,t.y);
  });

  // farm
  farm.forEach(f=>{
    ctx.font=f.height+"px sans-serif";
    if(!f.abducted) ctx.fillText(f.emoji,f.x-scrollX,f.y);
  });

  // UFO
  if(ufo.active){
    ctx.save();
    ctx.translate(ufo.x-scrollX,ufo.y);
    ctx.scale(ufo.scale,ufo.scale);
    ctx.fillText("üõ∏",0,0);
    ctx.restore();
  }

  // player
  ctx.font="56px sans-serif";
  ctx.fillText(player.emoji,player.x,player.y);
}

/* LOOP */
function loop(){update(); draw(); requestAnimationFrame(loop);}
loop();
</script>

</body>
</html>
