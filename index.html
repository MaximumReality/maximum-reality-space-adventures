<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality â€“ Night Run</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#000;
  touch-action:none;
  font-family:sans-serif;
}

#game{
  display:block;
}

#controls{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:12px;
  z-index:10;
}

button{
  font-size:26px;
  padding:12px 18px;
  border-radius:12px;
  border:none;
  background:#222;
  color:#fff;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<div id="controls">
  <button id="left">â¬…ï¸</button>
  <button id="jump">â¬†ï¸</button>
  <button id="right">â¡ï¸</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* WORLD LAYOUT */
const roadH = 80;
const grassH = 120;

/* PLAYER */
const player = {
  x: 200,
  y: 0,
  vy: 0,
  jumping:false,
  dir:"right"
};

/* SCROLL */
let scrollX = 0;

/* INPUT */
let left=false, right=false, jump=false;

function bind(btn, down, up){
  btn.addEventListener("touchstart", e=>{e.preventDefault(); down();});
  btn.addEventListener("touchend", e=>{e.preventDefault(); up();});
}

bind(leftBtn = document.getElementById("left"),
  ()=>left=true, ()=>left=false);
bind(rightBtn = document.getElementById("right"),
  ()=>right=true, ()=>right=false);
bind(jumpBtn = document.getElementById("jump"),
  ()=>jump=true, ()=>jump=false);

/* BACKGROUND DECOR */
const buildings = [];
for(let i=0;i<80;i++){
  buildings.push({
    x:i*200,
    emoji:["ğŸ¢","ğŸ¬","ğŸ­","ğŸ¨","ğŸ¦","ğŸ¥","ğŸ ","ğŸ¡","ğŸ•Œ","â›ªï¸","ğŸŸï¸"][i%11]
  });
}

const stars = [];
for(let i=0;i<120;i++){
  stars.push({
    x:Math.random()*5000,
    y:Math.random()*300,
    emoji:["â­ï¸","âœ¨","ğŸŒŸ"][i%3]
  });
}

const clouds = [
  {x:200,y:120},{x:600,y:160},{x:1000,y:100}
];

/* LOOP */
function update(){
  if(left){
    scrollX -= 5;
    player.dir="left";
  }
  if(right){
    scrollX += 5;
    player.dir="right";
  }

  if(jump && !player.jumping){
    player.vy = -18;
    player.jumping = true;
  }

  player.vy += 1;
  player.y += player.vy;

  const groundY = canvas.height - roadH - 30;
  if(player.y > groundY){
    player.y = groundY;
    player.vy = 0;
    player.jumping = false;
  }
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  /* SKY */
  ctx.fillStyle="#020a2a";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  /* STARS */
  ctx.font="16px sans-serif";
  stars.forEach(s=>{
    ctx.fillText(s.emoji, s.x - scrollX*0.2, s.y);
  });

  /* CLOUDS */
  ctx.font="48px sans-serif";
  clouds.forEach(c=>{
    ctx.fillText("â˜ï¸", c.x - scrollX*0.15, c.y);
  });

  /* GRASS */
  ctx.fillStyle="#2f7d32";
  ctx.fillRect(
    0,
    canvas.height-roadH-grassH,
    canvas.width,
    grassH
  );

  /* CITY */
  ctx.font="40px sans-serif";
  buildings.forEach(b=>{
    ctx.fillText(
      b.emoji,
      b.x - scrollX*0.5,
      canvas.height-roadH-grassH+50
    );
  });

  /* ROAD */
  ctx.fillStyle="#555";
  ctx.fillRect(
    0,
    canvas.height-roadH,
    canvas.width,
    roadH
  );

  /* PLAYER */
  ctx.font="56px sans-serif";
  const emoji = player.dir==="right" ? "ğŸƒğŸ¼â€â™€ï¸â€â¡ï¸" : "ğŸƒâ€â™€ï¸";
  ctx.fillText(emoji, player.x, player.y);
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
