<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality Space Adventures</title>
<style>
    body { margin:0; overflow:hidden; background:#222; font-family:sans-serif; }
    canvas { display:block; }
    .button { 
        position: fixed; 
        font-size: 48px; 
        background:#ffcc00; 
        color:#000; 
        padding: 12px 20px; 
        border-radius:8px; 
        user-select:none; 
        z-index:1000;
    }
    #left { left:20px; bottom:20px; }
    #right { left:120px; bottom:20px; }
    #jump { right:20px; bottom:20px; }
</style>
</head>
<body>

<div id="left" class="button">â—€</div>
<div id="right" class="button">â–¶</div>
<div id="jump" class="button">â¬†</div>

<canvas id="gameCanvas" width="800" height="600"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const WIDTH = canvas.width;
const HEIGHT = canvas.height;

const ROAD_Y = HEIGHT - 80;
const GREEN_HEIGHT = 80; // green band
const GREY_HEIGHT = 80;

let player = { x:WIDTH-100, y:ROAD_Y-GREY_HEIGHT, w:64, h:64, vy:0, jumping:false };
let mochkil = { x:WIDTH-150, y:ROAD_Y-GREY_HEIGHT, w:64, h:64 };
let foods = [];
let decorations = [];

let leftDown=false, rightDown=false, jumpDown=false;
let scrollX=0;

// ---- Buttons ----
document.getElementById('left').addEventListener('touchstart', ()=>leftDown=true);
document.getElementById('left').addEventListener('touchend', ()=>leftDown=false);
document.getElementById('right').addEventListener('touchstart', ()=>rightDown=true);
document.getElementById('right').addEventListener('touchend', ()=>rightDown=false);
document.getElementById('jump').addEventListener('touchstart', ()=>jumpDown=true);
document.getElementById('jump').addEventListener('touchend', ()=>jumpDown=false);

// ---- Decorations ----
const HOUSE_EMOJIS = ['ğŸ¡','ğŸ '];
const TREE_EMOJIS = ['ğŸŒ²','ğŸŒ³'];
const FLOWER_EMOJIS = ['ğŸŒ»','ğŸª»','ğŸŒ·'];
const FOOD_EMOJIS = ['ğŸ•','ğŸŒ®'];

// ---- Clouds and Rainbow ----
const clouds = [
    {x:200, y:50},
    {x:450, y:80},
    {x:650, y:40}
];
// Rainbow raised to top of green band
const rainbow = {x:WIDTH-64, y:ROAD_Y-GREEN_HEIGHT-24, emoji:"ğŸŒˆ"}; 

// ---- Pre-generate items ----
for(let i=0;i<10;i++){
    // Food
    let fx = player.x - i*80;
    foods.push({ x:fx, y:ROAD_Y-GREY_HEIGHT, emoji:FOOD_EMOJIS[Math.floor(Math.random()*FOOD_EMOJIS.length)], collected:false });
    
    // Decorations
    let dx = i*150 + 50;
    let dy = ROAD_Y - GREEN_HEIGHT + 20; // top of green band for houses
    let emoji;
    if(i%3===0) emoji = HOUSE_EMOJIS[Math.floor(Math.random()*HOUSE_EMOJIS.length)];
    else if(i%3===1) emoji = TREE_EMOJIS[Math.floor(Math.random()*TREE_EMOJIS.length)];
    else emoji = FLOWER_EMOJIS[Math.floor(Math.random()*FLOWER_EMOJIS.length)];
    decorations.push({x:dx, y:dy, emoji:emoji});
}

// ---- Game loop ----
function gameLoop(){
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

// ---- Update positions ----
function update(){
    if(leftDown) player.x -=5;
    if(rightDown) player.x +=5;
    if(jumpDown && !player.jumping){ player.vy=-12; player.jumping=true; }

    player.vy += 0.6;
    player.y += player.vy;

    // Lock player and raccoon to top of grey road
    if(player.y > ROAD_Y-GREY_HEIGHT){ 
        player.y = ROAD_Y-GREY_HEIGHT; 
        player.vy=0; 
        player.jumping=false; 
    }
    mochkil.y = ROAD_Y-GREY_HEIGHT;

    // Mochkil follows player
    let dx = player.x - mochkil.x;
    mochkil.x += dx*0.05;

    scrollX = player.x - (WIDTH-150);

    // Spawn food dynamically
    if(Math.random()<0.02){
        let fx = player.x - WIDTH - Math.random()*400;
        foods.push({x:fx, y:ROAD_Y-GREY_HEIGHT, emoji:FOOD_EMOJIS[Math.floor(Math.random()*FOOD_EMOJIS.length)], collected:false});
    }
}

// ---- Draw everything ----
function draw(){
    ctx.clearRect(0,0,WIDTH,HEIGHT);

    // Sky
    ctx.fillStyle="#87ceeb";
    ctx.fillRect(0,0,WIDTH,ROAD_Y-GREEN_HEIGHT);

    // Sun/cloud
    ctx.font="48px sans-serif";
    ctx.fillText("â›…ï¸",20,50);

    // Clouds
    clouds.forEach(c=>{
        ctx.fillText("â˜ï¸",c.x,c.y);
    });

    // Rainbow
    ctx.font="64px sans-serif";
    ctx.fillText(rainbow.emoji,rainbow.x,rainbow.y);

    // Green band
    ctx.fillStyle="#2ecc71";
    ctx.fillRect(0,ROAD_Y-GREEN_HEIGHT,WIDTH,GREEN_HEIGHT);

    // Decorations (houses, trees, flowers)
    decorations.forEach(d=>{
        if(d.x>scrollX-100 && d.x<scrollX+WIDTH+100){
            ctx.font="48px sans-serif";
            ctx.fillText(d.emoji,d.x-scrollX,d.y);
        }
    });

    // Grey road
    ctx.fillStyle="#666";
    ctx.fillRect(0,ROAD_Y,WIDTH,GREY_HEIGHT);

    // Food
    foods.forEach(f=>{
        if(!f.collected){
            ctx.font="48px sans-serif";
            ctx.fillText(f.emoji,f.x-scrollX,f.y);
        }
    });

    // Player
    ctx.font="64px sans-serif";
    ctx.fillText("ğŸƒâ€â™€ï¸",player.x-scrollX,player.y);

    // Mochkil
    ctx.fillText("ğŸ¦",mochkil.x-scrollX,mochkil.y);
}

gameLoop();
</script>

</body>
</html>
