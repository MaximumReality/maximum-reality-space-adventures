<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Maximum Reality ‚Äì Night Run</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#000;
  touch-action:none;
  font-family:sans-serif;
}

#game{
  display:block;
}

#controls{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:12px;
  z-index:10;
}

button{
  font-size:26px;
  padding:12px 18px;
  border-radius:12px;
  border:none;
  background:#222;
  color:#fff;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<div id="controls">
  <button id="left">‚¨ÖÔ∏è</button>
  <button id="jump">‚¨ÜÔ∏è</button>
  <button id="right">‚û°Ô∏è</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* LOAD PLAYER IMAGES */
const runnerRight = new Image();
runnerRight.src = "IMG_2161.png";

const runnerLeft = new Image();
runnerLeft.src = "IMG_2162.png";

/* WORLD LAYOUT */
const roadH = 80;
const grassH = 120;

/* PLAYER */
const player = {
  x: canvas.width/2,
  y: 0,
  vy: 0,
  jumping:false,
  dir:"right"
};

/* SCROLL */
let scrollX = 0;

/* INPUT */
let left=false, right=false, jump=false;

function bind(btn, down, up){
  btn.addEventListener("touchstart", e=>{e.preventDefault(); down();});
  btn.addEventListener("touchend", e=>{e.preventDefault(); up();});
}
bind(document.getElementById("left"), ()=>left=true, ()=>left=false);
bind(document.getElementById("right"), ()=>right=true, ()=>right=false);
bind(document.getElementById("jump"), ()=>jump=true, ()=>jump=false);

/* BACKGROUND DECOR */
const stars = [];
for(let i=0;i<200;i++){
  stars.push({x:Math.random()*8000,y:Math.random()*300,emoji:["‚≠êÔ∏è","‚ú®","üåü"][i%3]});
}

const clouds = [
  {x:200,y:100},{x:600,y:150},{x:1000,y:120}
];

/* CITY BUILDINGS (far left) */
const cityBuildings = [];
for(let i=0;i<15;i++){
  cityBuildings.push({
    x: i*200 - 1200,
    emoji:["üè¢","üè¨","üè≠","üè®","üè¶","üè•","üè†","üè°","üïå","‚õ™Ô∏è","üèüÔ∏è"][i%11],
    size: 180
  });
}

/* FOREST TREES (between city and farm) */
const forest = [];
for(let i=0;i<25;i++){
  forest.push({
    x: i*200 - 400,
    emoji: (i%2===0?"üå≤":"üå≥"),
    size: 80
  });
}

/* FARM SCENE (right) */
const farmAnimals = [];
const farmHouse = {x:1200,y:canvas.height-roadH-grassH,size:120,emoji:"üè°"};

farmAnimals.push({emoji:"üêÑ",x:1250,y:canvas.height-roadH-grassH-60,size:60,abducted:false});
farmAnimals.push({emoji:"üêë",x:1320,y:canvas.height-roadH-grassH-30,size:40});
farmAnimals.push({emoji:"üêñ",x:1380,y:canvas.height-roadH-grassH-40,size:35});
farmAnimals.push({emoji:"üêì",x:1420,y:canvas.height-roadH-grassH-25,size:25});
farmAnimals.push({emoji:"üêà",x:1480,y:canvas.height-roadH-grassH-20,size:20});
farmAnimals.push({emoji:"üåæ",x:1500,y:canvas.height-roadH-grassH-15,size:15});
farmAnimals.push({emoji:"üöú",x:1240,y:canvas.height-roadH-grassH-50,size:60});

/* UFO */
let ufo = {x:1250,y:100,size:60,active:false};

/* MOON */
const moon = {x:100,y:100,emoji:"üåñ",size:80};

/* LOOP */
function update(){
  if(left){scrollX-=5; player.dir="left";}
  if(right){scrollX+=5; player.dir="right";}
  if(jump && !player.jumping){player.vy=-18; player.jumping=true;}
  
  player.vy+=1;
  player.y+=player.vy;
  const groundY=canvas.height-roadH-18;
  if(player.y>groundY){player.y=groundY; player.vy=0; player.jumping=false;}

  // UFO Abduction Logic
  let cow = farmAnimals.find(a=>a.emoji==="üêÑ");
  if(cow && !cow.abducted){
    if(!ufo.active){ufo.active=true; ufo.y=50; ufo.size=40;}
    if(cow.y>ufo.y+40){
      cow.y-=2; // lift cow
      ufo.y+=0.5; // ufo rises slowly
      if(cow.y<=ufo.y){cow.abducted=true;}
    }
  } else if(cow && cow.abducted){
    cow.y=-100; // hide cow
    ufo.y=-100; // hide ufo
  }
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  /* SKY */
  ctx.fillStyle="#020a2a";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  /* STARS */
  ctx.font="16px sans-serif";
  stars.forEach(s=>ctx.fillText(s.emoji, s.x-scrollX*0.2, s.y));

  /* CLOUDS */
  ctx.font="48px sans-serif";
  clouds.forEach(c=>ctx.fillText("‚òÅÔ∏è", c.x-scrollX*0.15, c.y));

  /* GRASS */
  ctx.fillStyle="#2f7d32";
  ctx.fillRect(0,canvas.height-roadH-grassH,canvas.width,grassH);

  /* CITY */
  ctx.font="180px sans-serif";
  cityBuildings.forEach(b=>ctx.fillText(b.emoji,b.x-scrollX*0.5,canvas.height-roadH-grassH+10));

  /* FOREST TREES */
  ctx.font="80px sans-serif";
  forest.forEach(t=>ctx.fillText(t.emoji,t.x-scrollX*0.6,canvas.height-roadH-grassH-10));

  /* FARM */
  ctx.font="120px sans-serif";
  ctx.fillText(farmHouse.emoji,farmHouse.x-scrollX,farmHouse.y);
  farmAnimals.forEach(a=>{
    ctx.font=a.size+"px sans-serif";
    ctx.fillText(a.emoji,a.x-scrollX,a.y);
  });

  /* UFO */
  if(ufo.active){
    ctx.font=ufo.size+"px sans-serif";
    ctx.fillText("üõ∏",ufo.x-scrollX,ufo.y);
  }

  /* ROAD */
  ctx.fillStyle="#555";
  ctx.fillRect(0,canvas.height-roadH,canvas.width,roadH);

  /* PLAYER */
  const img = player.dir==="right"?runnerRight:runnerLeft;
  ctx.drawImage(img,player.x,player.y-56,56,56);

  /* MOON */
  ctx.font=moon.size+"px sans-serif";
  ctx.fillText(moon.emoji,moon.x,moon.y);
}

function loop(){update(); draw(); requestAnimationFrame(loop);}
loop();
</script>

</body>
</html>
